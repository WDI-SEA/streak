<div class="container">
  <h1>
    Hello <%= current_user.name %>
    <small><%= current_user.cohort.name if current_user.cohort %></small>
  </h1>
</div>

<% if current_user.last_snapshot %>

<div class="row">
  <div class="col-md-4 text-center">
    <p>Your last push was</p>
    <h2><%= time_ago_in_words(current_user.last_snapshot.last_push) %> ago</h2>
  </div>
  <div class="col-md-4 text-center">
    <p>Recent commits:</p>
    <h2><%= current_user.last_snapshot.commits %></h2>
  </div>
  <div class="col-md-4 text-center">
    <p>Recent Pull Requests</p>
    <h2><%= current_user.last_snapshot.pull_requests %></h2>
  </div>
</div>

<% end %>

<% if current_user.cohort %>

<hr>

<div class="container">
  <h3><%= current_user.cohort.name %> Leaderboard</h3>

  <table class="table table-striped">
    <thead>
      <tr>
        <th></th>
        <th></th>
        <th>Name</th>
        <th>Last Push</th>
      </tr>
    </thead>
    <tbody>

      <% @users.each_with_index do |user, idx| %>
      <tr>
        <th><%= idx + 1 %></th>
        <th><%= image_tag user.image, alt: "#{user.name}'s image", class: 'img-responsive leaderboard-img' %></th>
        <th><%= user.name %></th>
        <th><%= time_ago_in_words(user.snapshots.first.last_push) %> ago</th>
      </tr>
      <% end %>

    </tbody>
  </table>
</div>

<% end %>
